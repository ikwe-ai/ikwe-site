# Netlify configuration for ikwe.ai

[build]
  publish = "."
  functions = "netlify/functions"

# Redirect rules are also in _redirects file
# This is a backup/alternative configuration

[[redirects]]
  from = "/emotional-safety-gap.html"
  to = "/emotional-safety-gap"
  status = 301
  force = true

[[redirects]]
  from = "/research.html"
  to = "/research"
  status = 301
  force = true

[[redirects]]
  from = "/about.html"
  to = "/about"
  status = 301
  force = true

[[redirects]]
  from = "/press.html"
  to = "/press"
  status = 301
  force = true

[[redirects]]
  from = "/inquiry.html"
  to = "/inquiry"
  status = 301
  force = true

[[redirects]]
  from = "/explorer.html"
  to = "/explorer"
  status = 301
  force = true

[[redirects]]
  from = "/faq.html"
  to = "/faq"
  status = 301
  force = true

[[redirects]]
  from = "/blog.html"
  to = "/blog"
  status = 301
  force = true

[[redirects]]
  from = "/privacy.html"
  to = "/privacy"
  status = 301
  force = true

[[redirects]]
  from = "/terms.html"
  to = "/terms"
  status = 301
  force = true

# Legacy paths
[[redirects]]
  from = "/request-access"
  to = "/inquiry"
  status = 301

[[redirects]]
  from = "/contact"
  to = "/inquiry"
  status = 301

[[redirects]]
  from = "/gap"
  to = "/emotional-safety-gap"
  status = 301

# API routes
[[redirects]]
  from = "/api/newsletter"
  to = "/.netlify/functions/newsletter"
  status = 200

[[redirects]]
  from = "/api/inquiry"
  to = "/.netlify/functions/inquiry"
  status = 200

[[redirects]]
  from = "/api/access-request"
  to = "/.netlify/functions/access-request"
  status = 200

# Clean URLs - serve HTML files without extension
# These MUST come after the .html redirects
[[redirects]]
  from = "/emotional-safety-gap"
  to = "/emotional-safety-gap.html"
  status = 200

[[redirects]]
  from = "/research"
  to = "/research.html"
  status = 200

[[redirects]]
  from = "/about"
  to = "/about.html"
  status = 200

[[redirects]]
  from = "/press"
  to = "/press.html"
  status = 200

[[redirects]]
  from = "/inquiry"
  to = "/inquiry.html"
  status = 200

[[redirects]]
  from = "/explorer"
  to = "/explorer.html"
  status = 200

[[redirects]]
  from = "/faq"
  to = "/faq.html"
  status = 200

[[redirects]]
  from = "/blog"
  to = "/blog.html"
  status = 200

[[redirects]]
  from = "/privacy"
  to = "/privacy.html"
  status = 200

[[redirects]]
  from = "/terms"
  to = "/terms.html"
  status = 200

# Headers for security and caching
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"

[[headers]]
  for = "/og/*"
  [headers.values]
    Cache-Control = "public, max-age=86400"

[[headers]]
  for = "/*.html"
  [headers.values]
    Cache-Control = "public, max-age=0, must-revalidate"
